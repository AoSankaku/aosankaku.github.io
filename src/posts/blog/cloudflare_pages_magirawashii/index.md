---
title: "【Cloudflare Pages & Workers】画面が紛らわしすぎる"
category: "Tech"
date: "2025-05-11T01:30:00+09:00"
desc: "Minecraftサーバーをサブドメインで振り分けられるようにしようとしてCloudflareでレコードを記入しようとしたら、全然画面が違って混乱したのでメモとして残しておきます。"
tags:
  - Cloudflare
  - サーバー
---

Cloudflare Pages、使ったことありますか？無料で使える範囲が広くて素晴らしいですよね。

![作成](image.png)

というわけで、作成してみます。

![開始](image-1.png)

お、import a repositoryがいいかな！

はい、**ゲームオーバー**です。

## WorkersとPagesがあまりに紛らわしい

理由は上にあります。

![タブ](image-2.png)

まさかの**タブ切り替え**がいります。この記事では視線誘導しましたが、正直私は気づきませんでした。

これに気づかないと、表示がだんだんおかしくなっていきます。それではこのまま進めてみましょう。

![プロジェクトを構成する](image-3.png)

プロジェクトを構成する画面にそのままスムーズに進んでしまいました。適当に名前を決め、保存してデプロイしてみましょう。ちなみに、GatsbyとCloudflare Pagesは相性が悪い（自分調べ）ため、そもそもうまくいかない可能性はあります。

しかし、yarnのインストールに失敗したというのは致命的すぎます。なんとかしましょう。

![alt text](image-4.png)

ビルド構成とやらを確認してみます。

![alt text](image-5.png)

環境変数を追加してデプロイしてみましょう。

![alt text](image-10.png)

これでビルドしてみます。

![alt text](image-9.png)

同じエラーにより阻まれました。

![Workers & Pages](image-7.png)

ここから全く進むことができなくなりました。プレビューURLは何度見ても`Hello world`です。

しかも左上がこれなので、「Pagesではなく誤ってWorkersを選んでいる」事に気づきません。悪質。

## Pagesでやってみよう

というわけで、ここまで間違った方法（SSGなのに「Workers」）でやってきました。正しい方法である**Pages**をやっていきましょう。

![alt text](image-11.png)

![alt text](image-12.png)

ありゃりゃ、**さっきとぜんぜん違う画面**。それはそう。この2つ、同じところにまとめないでほしい。



`NODE_VERSION`だけは変えておかないと、デフォルトの謎の値を使ってビルドするため失敗します。ここだけは適当（ここでは私のパソコンに入っているものと同じ20.11.1）に変えましょう。

このとき、間違えて違うリポジトリをビルドしようとしてしまったのですが、このとき`YARN_VERSION`を1に指定しないとバージョン3を勝手に使い始めて超ビビりました。

![alt text](image-13.png)

ビルドには失敗しましたが、これは1ファイルが25MBを超えていたことによるものでこちら側の原因なので、成功と言っていいと思います。（Next.jsのStatic Exportを使った適当なほかのやつだとこれで行けました）

---

最後のコレのせいで説得力がなくなってしまいましたが、タブデザインの罠とNODE_VERSIONに気をつければだいたいなんとかなります。開発頑張ってくださいね。
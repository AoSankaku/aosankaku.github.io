{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/profile_pic_update/","result":{"data":{"markdownRemark":{"html":"<p>ある日突然、IFTTTでプロフィール画像が全く更新できなくなりました。<br>\n更新自体はできるんですが、プロフィール画像がこれになってしまうんです。</p>\n<p><img src=\"https://help.ifttt.com/hc/article_attachments/360041394694/no_image_card.png\" alt=\"File not found ifttt\"></p>\n<p>画像引用元：<a href=\"https://help.ifttt.com/hc/en-us/articles/115010361748-Why-is-there-a-File-not-found-image-on-my-post-\">https://help.ifttt.com/hc/en-us/articles/115010361748-Why-is-there-a-File-not-found-image-on-my-post-</a></p>\n<p>Google Driveから画像を引っ張ってきているのですが、「File not found」という画像になります。個性的っちゃ個性的ですが、真ん中を切り取るために真っ白けっけになります。あまりに没個性。</p>\n<p>今回はこれを直していきます。</p>\n<h1>発端</h1>\n<h2>プロフィール画像を自動で更新したい！</h2>\n<p>ありがたいことにプロフィール画像を複数の人に描いてもらうことができて、「どれか一つに決めるなんて私にはとても。。。。。。」という状態になっていました。</p>\n<p>そういうわけで、自動的にプロフィール画像が変わるようにしました。これが2019年ぐらいの出来事です。懐かしい。</p>\n<blockquote class=\"twitter-tweet\"><p lang=\"ja\" dir=\"ltr\">自動プロフィール画像更新 at April 28, 2019 at 12:01AM <a href=\"https://twitter.com/hashtag/NewProfilePic?src=hash&amp;ref_src=twsrc%5Etfw\">#NewProfilePic</a> <a href=\"https://twitter.com/hashtag/ifttt?src=hash&amp;ref_src=twsrc%5Etfw\">#ifttt</a></p>&mdash; Blue Triangle+ (@Ao_Sankaku) <a href=\"https://twitter.com/Ao_Sankaku/status/1122153743259262978?ref_src=twsrc%5Etfw\">April 27, 2019</a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n<p>until検索をかけた感じでいうとおそらくこれが最古です。伝説の始まり。</p>\n<h2>IFTTTとプロフィール画像更新</h2>\n<p>ところで、世の中にはIFTTTという「サービスとサービスを繋げて自動化させてあげるヨ！」なサービスがあります。便利ですね。</p>\n<p>しかし、<a href=\"https://izuki.net/ifttt-upgrade/\">有料化がいきなり発表</a>されました。しかも<strong>月10ドル</strong>。青天の霹靂でした。</p>\n<p>※現在は値下げ＆プランが分岐しており、一番高いプランで<strong>月5ドル</strong>です。流石に利用者が少なかったのでしょうか（笑）</p>\n<p>「無料だよ！！」とユーザーを引き込んでおきながらいきなり無料版ユーザーの首を絞める経営戦略は<strong>最低</strong>だと思いますが、便利さには抗えず課金をして使い続けています。</p>\n<p>プロフィール画像のアップデートは正常に動いています。つまり、問題部分は<strong>画像のURL</strong>で間違いありません。</p>\n<p>そうと分かれば早速直しにいきましょう。</p>\n<h2>原因</h2>\n<p>Google Driveで画像やファイルを共有すると、こんな見た目になります。</p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">https://drive.google.com/file/d/1234AbCd5678DeFg9012HiJk/view?usp=sharing</span></span></code></pre>\n<p>かつてはこのURLにリンクすればAPIが画像を返してくれていたようなのですが、現在は不可になっています。これが原因で画像を読み出せなくなっていたのですね。</p>\n<h2>力技（画像の直リンクを取得する）</h2>\n<p>ブラウザの開発者ツール（F12かCtrl+Shift+I押したら出てくるアレ）から無理やりURLを取得する方法です。</p>\n<ol>\n<li>Google Driveを開く</li>\n<li>フルサイズの画像を開く</li>\n<li>F12を押す</li>\n<li>画像の生URLゲット！</li>\n</ol>\n<p>もちろんこの方法はよくありません。</p>\n<ul>\n<li>画像のURLが将来的に変わると取得できなくなる</li>\n<li>めんどくさい</li>\n</ul>\n<p>という欠点があります。</p>\n<p>それとこのツイートを見てください。</p>\n<blockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"ja\"><p lang=\"ja\" dir=\"ltr\">IFTTTってやつで自動更新してるんだけど、なぞに画像の読み出しができなくなってめんどくさくなってきた <a href=\"https://t.co/xQ7Cde3aDz\">pic.twitter.com/xQ7Cde3aDz</a></p>&mdash; Blue Triangle+ (@Ao_Sankaku) <a href=\"https://twitter.com/Ao_Sankaku/status/1654813746328645632?ref_src=twsrc%5Etfw\">2023年5月6日</a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n<p><strong>URLが長すぎ</strong>。これではメンテナンスが大変です。別の方法を考えましょう。</p>\n<h2>解決へ</h2>\n<p>そしてこのブログに行き着きました。</p>\n<p><a href=\"https://3z1k.hatenablog.com/entry/2021/01/19/210000\">https://3z1k.hatenablog.com/entry/2021/01/19/210000</a></p>\n<p>このサイトに変換ツールなるものがあり、ありがたく使わせてもらいました。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.668711656441715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABsUlEQVR42qWS2XKcMBRE+YdUZkAbILSwmkVi85JUxfH/f1Kn0NSMHTsuP+ThVHOvWq0rIFrWBZN38N7h8ekB9w875mWGm2dMbkI/DPj1/Aw/e3z7fsYppjjFBKeEIiYfieq2Qdt1aNo2BDjv0LQ1JtdjGDt0dxXWzWGeR2irkEmBvEghMv4aRBkSyi6B/dCjqmsYa1FWVaDrS2x7g21rME4K21bj8ekOP36OWJYSy1phcgYiSyHSLISdExKImEhD41DKBBgXwRSTw0QDlKcglIdeQnmAMAHKL/5rYJjwmvyWU5wgJuR2pWs//of3tnZ9h2dCcONqIO82kM+D3hMlhIEcHNf4D46cMGGVt+jNiJTnIISDUvE15O/62JcLhZRLREaWSIUEZ9mnsDfPgucfYCwNQ6nMInp5+Y1t32HLGlIZaFNCafuqtgprpqygbYlMqkBe6ItKDVmYUB9fPXLOY9vv4ec5sKwr1m1HP4wYxgl+XoJOzmNyDpP3qNsuHFI3F82VQaEtmMgQyeI47cIxgdIG2lpksoAsNKTSEFke6sNjbIlCm1AXSgc9/mGeZiCM4w8l3U8EehOfkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"変換ツール\"\n        title=\"\"\n        src=\"/static/96e30aed6209c66f4dfa957ebedeaf66/a6d36/imgconvert.png\"\n        srcset=\"/static/96e30aed6209c66f4dfa957ebedeaf66/222b7/imgconvert.png 163w,\n/static/96e30aed6209c66f4dfa957ebedeaf66/ff46a/imgconvert.png 325w,\n/static/96e30aed6209c66f4dfa957ebedeaf66/a6d36/imgconvert.png 650w,\n/static/96e30aed6209c66f4dfa957ebedeaf66/63ec5/imgconvert.png 812w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ここにGoogle Driveの共有用URLを貼り付けると、</p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"html\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">&lt;</span><span class=\"grvsc-tiszgT-9 grvsc-t4tStz-3\">img</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-10 grvsc-t4tStz-5\">src</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">=</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;https://drive.google.com/uc?id=1234AbCd5678DeFg9012HiJk&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">&gt;</span></span></span></code></pre>\n<p>のような感じで、変換してくれます。手動で変換するのは面倒だったので、素晴らしいツールです。</p>\n<p>そしてこのURLをIFTTTに貼り付ければ…！</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.88957055214723%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADxUlEQVR42p2SfUzUdRzHfxzc3e+ej4s7vCPk4e4gD48HnQssJVutWoYEWbaAmbIKZlPIkoUimIF5FgktKTGeDBlqS4snD3IQqdwBbroQA5kZ8tDWH1nm1uZe7Q5ja83N+m6ffb+fp/f383l/PkLG0zOkP/MDr+V6eX7dCE+kX2PTNi+vFE3wQuEvvPTWNHmlE+ys8lBQ+SO7G6Z4tWKal8umyC2/hqtumK7THg4dGybfNYRQ1ARr80u5PDLMmbOT5Baep7JyP+82XSVv1xBFB26wfhds3jNJTdt13u+ErQ1/UnAY9py8xezsDJNXx5mamWHwwihC1nZYlVaC51wvN//4nb6+Hmpq6kjb2MyHH1TQPThLZvk0G2puU3RkElftCfq9F2ntuULBsZvUe3/lS+8kJ9q+oaJ8N0LWXlj/Zitjo8P4zqmudtzfetn2Ti3tX31BTkUPW7bvp2ngN9YUt/JptQu3+xRXx0aobrvEPs8tDp69zr62QYqbOhGyam/zeskhmuuP09jST4+7m5auc5S9V427/zuyN+2gpaUZ10e1PPbcBmo/qaG3t48r4+NcHhuj3DPNx1+fobn/expOexFymybYWVpPzY4qqlpG6XBf4A1XLY3NrVQ3tFDX2MDwxUt0drRTVnWQvK1vM+D1MuQZoLJngOLzU+Rk57Bx3VpWP/Ukwov5JbgOd3P8yGaGR2/wWfc0Samrych4locfeZTkh1aSviaNzMxMklOWY7XZSVmRSnx8PHZnAokPprA4Lg5bTKzfJ5gWxHL08wP0nszm56mfaDjagSAEIQjCPYndZichMQmbzU6AROKzCSx1WCnbspyiQhsLI1T+wMDAwL8DCAgImJc5oLnb55eLIqKoQC6X+3MEi8VCVHQ0ljAjERGRREREI5NJ54HutdL5eJMpFIcjjvDwyDt3+H8G+gegr9SQEAMmYwiGYD1arQaz2YxOp8FkjiTEGEpYmAWj0Yhe7/Nr/W+1Wk1wcDA6nc5v12g0SKVSBK1WjzNhGQ7nMmz2RTji4lkU58TpjCd11ePEOhJY7ExkxcpUkpOTsVqtREVFkrRkCfaYGP/nFsv9aA0WgqQyhMAgORrDQvShDyCqDChUwUiCFCwwhxEVFYVU1BMo0xIWbiUxaSlGkxlBkMwN4F8tSxBEUUShEFGI8rmWNJo5XaFApw9GLpeh1hoQ1SakCgNylRG50nB3DlVqNYb7QlCpNCiVKgwGAzqdHp9doVTOrYR/NUSUSiWSO6t0V0AfmT5yZTK5n1QfoC/Rp/+fKf8FnbZ3yEqSPyEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"変換ツール\"\n        title=\"\"\n        src=\"/static/4a16e4cf9364791773f520bc6062d65c/0a47e/twprofile.png\"\n        srcset=\"/static/4a16e4cf9364791773f520bc6062d65c/222b7/twprofile.png 163w,\n/static/4a16e4cf9364791773f520bc6062d65c/ff46a/twprofile.png 325w,\n/static/4a16e4cf9364791773f520bc6062d65c/0a47e/twprofile.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><strong>大成功</strong>。問題解決！</p>\n<p>ところで、この画像URLに実際にアクセスしてみると<strong>とんでもない長さのURLにリダイレクトされます</strong>。こちらももしかしたら将来使えなくなったり…？</p>\n<h2>今気づいた</h2>\n<p>ところで、IFTTTには課金プラン導入と同時に「フィルター」機能が実装されました。</p>\n<blockquote class=\"twitter-tweet\" data-conversation=\"none\"><p lang=\"zxx\" dir=\"ltr\"><a href=\"https://t.co/0vg1nlqT7m\">pic.twitter.com/0vg1nlqT7m</a></p>&mdash; Blue Triangle+ (@Ao_Sankaku) <a href=\"https://twitter.com/Ao_Sankaku/status/1659902818583715841?ref_src=twsrc%5Etfw\">May 20, 2023</a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n<p>これを使うと、「火曜日は実行しない」とか、「3で終わる日だけ実行する」とかができます。<br>\n<strong>変数の変換や操作もできます</strong>。</p>\n<p>あれ…？</p>\n<p>画像の共有URLをこの形式に自動変換するスクリプトを組めばよかったのでは…？</p>\n<h2>完全なる余談</h2>\n<p>ブログにリンクを張ったときにカードが出るようにしたいです。見た目がいいので。そのうち実装します。</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .github-light-theme {\n    background-color: #ffffff;\n    color: #000000;\n  }\n  .github-light-theme .grvsc-tiszgT-1 { color: #000000; }\n  .github-light-theme .grvsc-tiszgT-9 { color: #22863A; }\n  .github-light-theme .grvsc-tiszgT-10 { color: #6F42C1; }\n  .github-light-theme .grvsc-tiszgT-8 { color: #032F62; }\n  .github-light-theme .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n  body[data-theme=dark] .grvsc-ps-t4tStz { color: #ffffff; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-1 { color: #FFFFFF; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-3 { color: #66B5F6; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-5 { color: #BB97E7; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-10 { color: #9DCDF5; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","frontmatter":{"title":"IFTTTでプロフィール画像が更新できなくなった","desc":"IFTTTで以前までプロフィール画像を自動更新できていたのですが、できなくなりました。解決していきます。","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACfElEQVR42pWRTUgUYRjH30NBUYeQFpEIC4QSPHnqUKc6hGZCoq2KmUGRBNLHIZDCDWorhchNIm0N1FN5yDYkCaMPSFMPgpqwBiu4ue4668y6i67jzOwv3sFZDLr0wJ/n4/3P//kYkUwmURSFtbU1EokEqqra+crKig1N03A4MpdeciQ3Ho/bNeklUqkUQj5KhMNhG5Zl4Vgmk7FJCwsLf9UNw7CFpcm65Om6bjcXMhgZGcHj8dDc3IzX62V4eBifz0dbWxvd3d10dHTQ2tpqv/n9fpvb19eXFZe2ublpTyuk6urqqj3J/Pw8wWCQWCzG3NwcMzMzRCIRe5rp6WkmJiYIhUJMTU3ZdWcLR9CeUK5rbnX5X8vIM5im3Bs9vY4aVxCaqqKn07KVfQ/nJk68PTdNM+vNrbpjOqBuGAg1oeHMZ5kWhgWGKQUy2ZWcD6U3tonIyBh9i3W/nM27JawP+hGLTV6U9j70RMqRzdINSzYwbVgZK/un07pOWAaBdjghMI4JjLMCs34fYunkJeJFZaQv3kaJpun9AZ1fLEJK5p9364zGKPj8HdeHrxzvesq3hkI2XhayHCwnPleJmD13E9/VZ7yof8DpK5OIGhBuk72N8GhsEs9sD0+C79FIEpiYZde954iu14jBj4jAKLfGvaS1M0TibpaVC4jCVz/ZHVAp+qRxqD9GwcM0xXegqGuIg4HLHHjXQMFQI7VNNyjLKaNkzylKc8vIv/aYnYNDjIfqWF0qJbpYgbJUi9jRH8X15jd5/YvsHwjj6tVwtfwiN1BN3kAdOUP1FLfUcz63gsqCKqqOVOM+XIk7v5Kjvh7Glq6TjLpZjjagRGv4A/k7KXR3AYEfAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/96ff1cee0b824f18612629b4bcf24e91/a9cd6/no_image_card.png","srcSet":"/static/96ff1cee0b824f18612629b4bcf24e91/a9cd6/no_image_card.png 800w","sizes":"800px"},"sources":[{"srcSet":"/static/96ff1cee0b824f18612629b4bcf24e91/4713d/no_image_card.webp 800w","type":"image/webp","sizes":"800px"}]},"width":800,"height":494}}},"date":"2023-05-21","category":"Tech"}}},"pageContext":{"slug":"/blog/profile_pic_update/"}},"staticQueryHashes":["1044384444","1252248799","164652340","1840460387","3011273866","3435873967","3683278892","970608822"],"slicesMap":{}}